# ğŸ“˜ ê°€ì´ë“œ_10_ì˜¤ì°½ì¤€_ê³µí†µê´€ë¦¬ (ì‹¬í™”)

> **ìƒíƒœ ì§„ë‹¨**: `AdminServlet`ì€ ì¡´ì¬í•˜ì§€ë§Œ, ì‹¤ì œë¡œ ê´€ë¦¬ì ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  **Action í´ë˜ìŠ¤**ë“¤ì´ ë¹„ì–´ìˆê±°ë‚˜ ì—°ê²°ë˜ì§€ ì•Šì•˜ì„ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.
> **ëª©í‘œ**: ê´€ë¦¬ì ë©”ì¸ í™”ë©´ê³¼ íšŒì› ëª©ë¡ ì¡°íšŒë¥¼ ì‹¤ì œë¡œ ì‘ë™í•˜ê²Œ ë§Œë“¤ê¸°

---

## 1. ğŸš¨ `AdminMainAction.java` êµ¬í˜„

ê´€ë¦¬ìê°€ ë¡œê·¸ì¸ í›„ ì²˜ìŒ ë³´ê²Œ ë  ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤. ë‹¨ìˆœíˆ JSPë¡œ ì´ë™ë§Œ í•˜ë©´ ë˜ì§€ë§Œ, **ê´€ë¦¬ì ê¶Œí•œ ì²´í¬**ë¥¼ í•œ ë²ˆ ë” í•´ì£¼ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.

```java
package com.saeyan.controller.action.admin;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.saeyan.controller.action.Action;

public class AdminMainAction implements Action {

    @Override
    public String execute(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
            
        String url = "admin/adminMain.jsp";
        
        // ì´ì¤‘ ë³´ì•ˆ: ì„¸ì…˜ ì²´í¬
        HttpSession session = request.getSession();
        String userRole = (String) session.getAttribute("userRole");
        
        if(userRole == null || !userRole.equals("ADMIN")) {
            return "redirect:index.jsp"; // ê´€ë¦¬ì ì•„ë‹ˆë©´ ì«“ì•„ëƒ„
        }

        return url;
    }
}
```

---

## 2. ğŸš¨ `MemberListAction.java` êµ¬í˜„ (íšŒì› ëª©ë¡)

`admin/member/memberList.jsp`ì— ë°ì´í„°ë¥¼ ë¿Œë ¤ì£¼ê¸° ìœ„í•´ DBì—ì„œ íšŒì› ëª©ë¡ì„ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.

**ì£¼ì˜**: `MemberDAO`ì— `selectAllMembers()` ë©”ì„œë“œê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì—†ìœ¼ë©´ í•˜ì˜ë‹˜ì—ê²Œ ìš”ì²­í•˜ê±°ë‚˜ ì§ì ‘ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. (í˜„ì¬ ì½”ë“œë¥¼ ë³´ë‹ˆ `selectAllMembers()`ê°€ ìˆìŠµë‹ˆë‹¤! ğŸ‘)

```java
package com.saeyan.controller.action.admin;

import java.io.IOException;
import java.util.List;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.saeyan.controller.action.Action;
import com.saeyan.dao.MemberDAO;
import com.saeyan.dto.MemberVO;

public class MemberListAction implements Action {

    @Override
    public String execute(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
            
        String url = "admin/member/memberList.jsp";

        MemberDAO dao = MemberDAO.getInstance();
        // DAOì˜ ë©”ì„œë“œ ì´ë¦„ í™•ì¸: listMembers() ì¸ì§€ selectAllMembers() ì¸ì§€
        List<MemberVO> memberList = dao.selectAllMembers(); 
        
        request.setAttribute("memberList", memberList);

        return url;
    }
}
```

---

## 3. ğŸ› ï¸ `ActionFactory`ì— ê´€ë¦¬ì ì»¤ë§¨ë“œ ë“±ë¡

`AdminServlet`ì´ `ActionFactory`ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë¯€ë¡œ, `ActionFactory`ì— ê´€ë¦¬ììš© ì»¤ë§¨ë“œë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.

**`src/main/java/com/saeyan/controller/ActionFactory.java`**

```java
public Action getAction(String command) {
    Action action = null;
    
    // ... ê¸°ì¡´ ë©¤ë²„/ê²Œì‹œíŒ ì»¤ë§¨ë“œë“¤ ...

    // âœ… ê´€ë¦¬ì ê´€ë ¨ ì»¤ë§¨ë“œ ì¶”ê°€
    if (command.equals("admin_main")) {
        action = new AdminMainAction();
    } else if (command.equals("member_list")) {
        action = new MemberListAction();
    }
    
    return action;
}
```

---

## 4. ğŸ¨ `header.jsp` ì ê²€ (JSTL vs ìŠ¤í¬ë¦½íŠ¸ë¦¿)

í˜„ì¬ `common/header.jsp`ëŠ” `<% %>` (ìŠ¤í¬ë¦½íŠ¸ë¦¿) ë°©ì‹ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.
í”„ë¡œì íŠ¸ í‘œì¤€ì´ **JSTL**ì´ë¼ë©´ ì•„ë˜ì™€ ê°™ì´ ë°”ê¾¸ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. (í•„ìˆ˜ëŠ” ì•„ë‹˜)

**AS-IS (í˜„ì¬ ì½”ë“œ)**
```jsp
<% if ("ADMIN".equals(userRole)) { %>
    <span class="badge-admin">[ê´€ë¦¬ì]</span>
<% } %>
```

**TO-BE (JSTL ê¶Œì¥)**
```jsp
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<c:if test="${sessionScope.userRole == 'ADMIN'}">
    <span class="badge-admin">[ê´€ë¦¬ì]</span>
</c:if>
```
JSTLì´ ê°€ë…ì„±ì´ ë” ì¢‹ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰½ìŠµë‹ˆë‹¤. ì—¬ìœ ê°€ ëœë‹¤ë©´ ë°”ê¿”ì£¼ì„¸ìš”!

ì°½ì¤€ë‹˜ì€ **ê´€ë¦¬ì í˜ì´ì§€ì˜ ë¬¸ì§€ê¸°**ì…ë‹ˆë‹¤. `AdminMainAction`ì—ì„œ ê¶Œí•œ ì²´í¬ë¥¼ í™•ì‹¤íˆ í•´ì£¼ì„¸ìš”!
