# í†µí•© JSP í”„ë¡œì íŠ¸ ê°€ì´ë“œ V3 (ìµœì¢…)

> [!NOTE]
> **V3 ì—…ë°ì´íŠ¸ ì‚¬í•­**
> 
> - âœ… ì‹¤ì œ ì™„ì„±ëœ board-project êµ¬ì¡° ë°˜ì˜ (28 JavaíŒŒì¼, 19 JSPíŒŒì¼)
> - âœ… ìƒí’ˆ ê´€ë¦¬ ì œì™¸ (ê²Œì‹œíŒ & ê²Œì‹œíŒ ê´€ë¦¬ì— ì§‘ì¤‘)
> - âœ… test í´ë” ë° devMode.jsp ì œê±° ì™„ë£Œ
> - âœ… ì„¸ì…˜ ê¸°ë°˜ íšŒì› ì—°ë™ ê²Œì‹œíŒ ì™„ì„±
> 
> **ì—­í• **:
> - ê¸°ìˆ  êµ¬í˜„ ë°©ë²• (íŒ¨í„´, ì•„í‚¤í…ì²˜, ì½”ë“œ ì˜ˆì‹œ)
> - Git í˜‘ì—…, ë¸Œëœì¹˜ ì „ëµ â†’ **`íŒ€ì›ë³„_ë¸Œëœì¹˜_ì‘ì—…_ê°€ì´ë“œ.md`** ì°¸ì¡°
> - íšŒì› ì—°ë™ ê°œë… ì„¤ëª… â†’ **`íšŒì›_ì—°ë™_í†µí•©_ê°€ì´ë“œ.md`** ì°¸ì¡°

---

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

### ê¸°ë°˜ í”„ë¡œì íŠ¸
- **web-study-09**: íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ
- **web-study-11**: ê²Œì‹œíŒ ì‹œìŠ¤í…œ (Front Controller íŒ¨í„´)
- **í†µí•© ë°©ì‹**: ì„¸ì…˜ ê¸°ë°˜ íšŒì› ì—°ë™

### í•µì‹¬ ê¸°ëŠ¥
1. **ì¸ì¦**: íšŒì›ê°€ì… (ì¼ë°˜/ê´€ë¦¬ì), ë¡œê·¸ì¸, ì„¸ì…˜ ê´€ë¦¬
2. **ê¶Œí•œ**: MEMBER (ì¼ë°˜ íšŒì›), ADMIN (ê´€ë¦¬ì)
3. **ê²Œì‹œíŒ**: ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ê¸€ ì‘ì„±, ë³¸ì¸ ê¸€ë§Œ ìˆ˜ì •/ì‚­ì œ
4. **ê´€ë¦¬**: ê´€ë¦¬ìëŠ” ëª¨ë“  ê²Œì‹œê¸€ ê´€ë¦¬ + íšŒì› ê´€ë¦¬

---

## ğŸ“ í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡° (ì‹¤ì œ ì™„ì„±ë³¸)

```
board-project/
â”œâ”€â”€ src/main/java/
â”‚   â”œâ”€â”€ com/saeyan/
â”‚   â”‚   â”œâ”€â”€ controller/               # ğŸ¯ Front Controller
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberServlet.java
â”‚   â”‚   â”‚   â”œâ”€â”€ BoardServlet.java
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminServlet.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ActionFactory.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ action/
â”‚   â”‚   â”‚       â”œâ”€â”€ Action.java       # ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚       â”œâ”€â”€ member/           # 6ê°œ íŒŒì¼
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ LoginFormAction.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ LoginAction.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ LogoutAction.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ JoinFormAction.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ JoinAction.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UpdateAction.java
â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚       â”œâ”€â”€ board/            # 7ê°œ íŒŒì¼
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ BoardListAction.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ BoardViewAction.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ BoardWriteFormAction.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ BoardWriteAction.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ BoardUpdateFormAction.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ BoardUpdateAction.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ BoardDeleteAction.java
â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚       â””â”€â”€ admin/            # 6ê°œ íŒŒì¼
â”‚   â”‚   â”‚           â”œâ”€â”€ AdminMainAction.java
â”‚   â”‚   â”‚           â”œâ”€â”€ MemberListAction.java
â”‚   â”‚   â”‚           â”œâ”€â”€ MemberDetailAction.java
â”‚   â”‚   â”‚           â”œâ”€â”€ BoardManageListAction.java
â”‚   â”‚   â”‚           â”œâ”€â”€ BoardManageUpdateAction.java
â”‚   â”‚   â”‚           â””â”€â”€ BoardManageDeleteAction.java
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ dao/
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberDAO.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardDAO.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â”œâ”€â”€ MemberVO.java
â”‚   â”‚       â””â”€â”€ BoardVO.java          # writer í•„ë“œ (ì„¸ì…˜ ê¸°ë°˜)
â”‚   â”‚
â”‚   â””â”€â”€ util/
â”‚       â””â”€â”€ DBManager.java
â”‚
â””â”€â”€ src/main/webapp/
    â”œâ”€â”€ index.jsp
    â”œâ”€â”€ error.jsp
    â”‚
    â”œâ”€â”€ member/                       # 5ê°œ JSP
    â”‚   â”œâ”€â”€ login.jsp
    â”‚   â”œâ”€â”€ join.jsp
    â”‚   â”œâ”€â”€ idCheck.jsp
    â”‚   â”œâ”€â”€ main.jsp
    â”‚   â””â”€â”€ memberUpdate.jsp
    â”‚
    â”œâ”€â”€ board/                        # 3ê°œ JSP (ê¹”ë”!)
    â”‚   â”œâ”€â”€ boardList.jsp
    â”‚   â”œâ”€â”€ boardWrite.jsp            # âœ… ì„¸ì…˜ ì—°ë™ ì™„ë£Œ
    â”‚   â””â”€â”€ boardView.jsp             # âœ… ê¶Œí•œ ì²´í¬ ì™„ë£Œ
    â”‚
    â”œâ”€â”€ admin/                        # 5ê°œ JSP
    â”‚   â”œâ”€â”€ adminMain.jsp
    â”‚   â”œâ”€â”€ member/
    â”‚   â”‚   â”œâ”€â”€ memberList.jsp
    â”‚   â”‚   â””â”€â”€ memberDetail.jsp
    â”‚   â””â”€â”€ board/
    â”‚       â”œâ”€â”€ boardManage.jsp
    â”‚       â””â”€â”€ boardManageDelete.jsp
    â”‚
    â”œâ”€â”€ common/                       # 4ê°œ JSP
    â”‚   â”œâ”€â”€ checkLogin.jsp            # ë¡œê·¸ì¸ ì²´í¬
    â”‚   â”œâ”€â”€ checkAdmin.jsp            # ê´€ë¦¬ì ì²´í¬
    â”‚   â”œâ”€â”€ header.jsp
    â”‚   â””â”€â”€ footer.jsp
    â”‚
    â”œâ”€â”€ css/
    â”‚   â””â”€â”€ style.css
    â”‚
    â””â”€â”€ script/
        â””â”€â”€ common.js
```

> [!IMPORTANT]
> **ì™œ ê¹”ë”í•œê°€?**
> - âŒ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ íŒŒì¼ ì—†ìŒ (boardCheckPass.jsp, checkSuccess.jsp)
> - âŒ ê°œë°œìš© íŒŒì¼ ì—†ìŒ (test/testLogin.jsp, devMode.jsp)
> - âœ… ì„¸ì…˜ ê¸°ë°˜ ê¶Œí•œ ê´€ë¦¬ë¡œ ë‹¨ìˆœí™”
> - âœ… Front Controller íŒ¨í„´ìœ¼ë¡œ êµ¬ì¡°í™”

---

## ğŸ—ï¸ Front Controller íŒ¨í„´ (web-study-11 ìŠ¤íƒ€ì¼)

### í•µì‹¬ êµ¬ì¡°

```
ì‚¬ìš©ì ìš”ì²­
    â†“
í•˜ë‚˜ì˜ Servlet (BoardServlet)
    â†“
ActionFactory (command ë¶„ì„)
    â†“
ì ì ˆí•œ Action ì‹¤í–‰ (BoardListAction)
    â†“
DAO â†’ DB
    â†“
JSPë¡œ forward
```

### URL íŒ¨í„´ ì˜ˆì‹œ

| ê¸°ëŠ¥ | URL |
|------|-----|
| ë¡œê·¸ì¸ í¼ | `/MemberServlet?command=login_form` |
| ë¡œê·¸ì¸ ì²˜ë¦¬ | `/MemberServlet?command=login` (POST) |
| ê²Œì‹œíŒ ëª©ë¡ | `/BoardServlet?command=board_list` |
| ê²Œì‹œê¸€ ì‘ì„± | `/BoardServlet?command=board_write_form` |
| ê²Œì‹œê¸€ ìƒì„¸ | `/BoardServlet?command=board_view&seq=1` |
| ê´€ë¦¬ì ë©”ì¸ | `/AdminServlet?command=admin_main` |

---

## ğŸ”„ ì‚¬ìš©ì í”Œë¡œìš°

```mermaid
flowchart LR
    A[index.jsp] --> B{ë¡œê·¸ì¸}
    B -->|ì„±ê³µ| C{ê¶Œí•œ í™•ì¸}
    C -->|ADMIN| D[ê´€ë¦¬ì í˜ì´ì§€]
    C -->|MEMBER| E[ê²Œì‹œíŒ]
    D --> F[íšŒì› ê´€ë¦¬]
    D --> G[ê²Œì‹œíŒ ê´€ë¦¬]
    E --> H[ê¸€ ì‘ì„±/ì¡°íšŒ]
```

**í•µì‹¬:**
- ê´€ë¦¬ì â†’ ëª¨ë“  ê²Œì‹œê¸€ ê´€ë¦¬ ê°€ëŠ¥
- ì¼ë°˜ íšŒì› â†’ ë³¸ì¸ ê¸€ë§Œ ìˆ˜ì •/ì‚­ì œ
- ì„¸ì…˜ìœ¼ë¡œ ìë™ ê¶Œí•œ í™•ì¸

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### members í…Œì´ë¸”
```sql
CREATE TABLE members (
    id VARCHAR(50) PRIMARY KEY,
    password VARCHAR(100) NOT NULL,
    name VARCHAR(50) NOT NULL,
    email VARCHAR(100),
    role VARCHAR(20) DEFAULT 'MEMBER',  -- 'MEMBER' or 'ADMIN'
    phone VARCHAR(20),
    regdate DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### board í…Œì´ë¸” (íšŒì› ì—°ë™í˜•)
```sql
CREATE TABLE board (
    seq INT AUTO_INCREMENT PRIMARY KEY,
    writer VARCHAR(50) NOT NULL,        -- members.id FK
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    hit INT DEFAULT 0,
    regdate DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (writer) REFERENCES members(id) ON DELETE CASCADE
);
```

**í•µì‹¬ ì°¨ì´ (vs web-study-11):**
- âœ… `writer` - ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID (FK)
- âŒ `name`, `pass`, `email` - ì œê±° (members ì¡°ì¸)

---

## ğŸ’» í•µì‹¬ êµ¬í˜„ ì½”ë“œ

### 1. BoardVO (íšŒì› ì—°ë™í˜•)

```java
public class BoardVO {
    private int seq;
    private String writer;      // â† members.id
    private String title;
    private String content;
    private int hit;
    private Timestamp regdate;
    
    // getter/setter...
}
```

### 2. boardWrite.jsp (ì„¸ì…˜ ê¸°ë°˜)

```jsp
<%@ include file="../common/checkLogin.jsp" %>
<%
    String userId = (String) session.getAttribute("userId");
    String userName = (String) session.getAttribute("userName");
%>

<form action="../BoardServlet?command=board_write" method="post">
    <input type="hidden" name="writer" value="<%= userId %>">
    
    <div>
        <label>ì‘ì„±ì:</label>
        <span><%= userName %></span>  <!-- ìˆ˜ì • ë¶ˆê°€ -->
    </div>
    
    <div>
        <label>ì œëª©:</label>
        <input type="text" name="title" required>
    </div>
    
    <div>
        <label>ë‚´ìš©:</label>
        <textarea name="content" required></textarea>
    </div>
    
    <button type="submit">ë“±ë¡</button>
</form>
```

### 3. BoardWriteAction

```java
public String execute(HttpServletRequest request, HttpServletResponse response) {
    HttpSession session = request.getSession();
    String userId = (String) session.getAttribute("userId");
    
    if(userId == null) {
        return "redirect:../member/login.jsp";
    }
    
    BoardVO vo = new BoardVO();
    vo.setWriter(userId);                          // ì„¸ì…˜ì—ì„œ
    vo.setTitle(request.getParameter("title"));
    vo.setContent(request.getParameter("content"));
    
    BoardDAO.getInstance().insertBoard(vo);
    
    return "redirect:BoardServlet?command=board_list";
}
```

### 4. boardView.jsp (ê¶Œí•œ ì²´í¬)

```jsp
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<div class="board-view">
    <div>ì œëª©: ${board.title}</div>
    <div>ì‘ì„±ì: ${board.writer}</div>
    <div>ë‚´ìš©: ${board.content}</div>
</div>

<!-- JSTLë¡œ ê¶Œí•œ ì²´í¬ -->
<c:if test="${sessionScope.userId == board.writer || sessionScope.userRole == 'ADMIN'}">
    <a href="../BoardServlet?command=board_update_form&seq=${board.seq}">ìˆ˜ì •</a>
    <a href="../BoardServlet?command=board_delete&seq=${board.seq}" 
       onclick="return confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</a>
</c:if>

<a href="../BoardServlet?command=board_list">ëª©ë¡</a>
```

---

## ğŸ¯ ê¶Œí•œ ê´€ë¦¬ ë¡œì§

### checkLogin.jsp (ê³µí†µ ë¡œê·¸ì¸ ì²´í¬)

```jsp
<%
    String userId = (String) session.getAttribute("userId");
    if (userId == null || userId.isEmpty()) {
        response.sendRedirect(request.getContextPath() + "/member/login.jsp");
        return;
    }
%>
```

### checkAdmin.jsp (ê´€ë¦¬ì ì²´í¬)

```jsp
<%
    String userRole = (String) session.getAttribute("userRole");
    if (!"ADMIN".equals(userRole)) {
        response.sendRedirect(request.getContextPath() + "/error.jsp");
        return;
    }
%>
```

### ì‚¬ìš© ì˜ˆì‹œ

```jsp
<%-- ëª¨ë“  ê²Œì‹œíŒ í˜ì´ì§€ ìƒë‹¨ì— --%>
<%@ include file="../common/checkLogin.jsp" %>

<%-- ê´€ë¦¬ì í˜ì´ì§€ ìƒë‹¨ì— --%>
<%@ include file="../common/checkAdmin.jsp" %>
```

---

## ğŸš€ Action ëª©ë¡ ë° ì—­í• 

### Member Actions (6ê°œ)

| Action | ì—­í•  | ë°˜í™˜ |
|--------|------|------|
| `LoginFormAction` | ë¡œê·¸ì¸ í¼ í‘œì‹œ | `member/login.jsp` |
| `LoginAction` | ë¡œê·¸ì¸ ì²˜ë¦¬, ì„¸ì…˜ ì„¤ì • | redirect (ê¶Œí•œë³„ ë¶„ê¸°) |
| `LogoutAction` | ë¡œê·¸ì•„ì›ƒ, ì„¸ì…˜ ì œê±° | `member/login.jsp` |
| `JoinFormAction` | íšŒì›ê°€ì… í¼ í‘œì‹œ | `member/join.jsp` |
| `JoinAction` | íšŒì›ê°€ì… ì²˜ë¦¬ | `member/login.jsp` |
| `UpdateAction` | íšŒì›ì •ë³´ ìˆ˜ì • | `member/main.jsp` |

### Board Actions (7ê°œ)

| Action | ì—­í•  | ê¶Œí•œ ì²´í¬ |
|--------|------|---------|
| `BoardListAction` | ê²Œì‹œê¸€ ëª©ë¡ | ì—†ìŒ (ëˆ„êµ¬ë‚˜) |
| `BoardViewAction` | ê²Œì‹œê¸€ ìƒì„¸, ì¡°íšŒìˆ˜ ì¦ê°€ | ì—†ìŒ |
| `BoardWriteFormAction` | ì‘ì„± í¼ í‘œì‹œ | ë¡œê·¸ì¸ í•„ìš” |
| `BoardWriteAction` | ê²Œì‹œê¸€ ë“±ë¡ | ë¡œê·¸ì¸ í•„ìš” |
| `BoardUpdateFormAction` | ìˆ˜ì • í¼ í‘œì‹œ | ì‘ì„±ì or ê´€ë¦¬ì |
| `BoardUpdateAction` | ê²Œì‹œê¸€ ìˆ˜ì • | ì‘ì„±ì or ê´€ë¦¬ì |
| `BoardDeleteAction` | ê²Œì‹œê¸€ ì‚­ì œ | ì‘ì„±ì or ê´€ë¦¬ì |

### Admin Actions (6ê°œ)

| Action | ì—­í•  |
|--------|------|
| `AdminMainAction` | ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ |
| `MemberListAction` | ì „ì²´ íšŒì› ëª©ë¡ |
| `MemberDetailAction` | íšŒì› ìƒì„¸ ì •ë³´ |
| `BoardManageListAction` | ì „ì²´ ê²Œì‹œê¸€ ê´€ë¦¬ ëª©ë¡ |
| `BoardManageUpdateAction` | ê²Œì‹œê¸€ ìˆ˜ì • (ê´€ë¦¬ì) |
| `BoardManageDeleteAction` | ê²Œì‹œê¸€ ì‚­ì œ (ê´€ë¦¬ì) |

---

## ğŸ“Š ERD

```mermaid
erDiagram
    MEMBERS ||--o{ BOARD : writes
    
    MEMBERS {
        varchar id PK
        varchar password
        varchar name
        varchar email
        varchar role
        datetime regdate
    }
    
    BOARD {
        int seq PK
        varchar writer FK
        varchar title
        text content
        int hit
        datetime regdate
    }
```

---

## âœ… ê°œë°œ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### íŒŒì¼ êµ¬ì¡°
- [x] 28ê°œ Java íŒŒì¼ (Action 20ê°œ, Servlet 3ê°œ, DAO 2ê°œ, VO 2ê°œ, Factory 1ê°œ)
- [x] 19ê°œ JSP íŒŒì¼
- [x] checkLogin.jsp, checkAdmin.jsp ê³µí†µ íŒŒì¼
- [x] test í´ë” ì œê±°
- [x] devMode.jsp ì œê±°

### ì„¸ì…˜ ì—°ë™
- [x] BoardVOì— writer í•„ë“œ
- [x] boardWrite.jsp ì„¸ì…˜ ê¸°ë°˜ writer ì„¤ì •
- [x] boardView.jsp ê¶Œí•œ ì²´í¬ (JSTL)
- [x] BoardWriteAction ë¡œê·¸ì¸ ì²´í¬

### ê¶Œí•œ ê´€ë¦¬
- [x] ì¼ë°˜ íšŒì›: ë³¸ì¸ ê¸€ë§Œ ìˆ˜ì •/ì‚­ì œ
- [x] ê´€ë¦¬ì: ëª¨ë“  ê¸€ ê´€ë¦¬ ê°€ëŠ¥
- [x] ë¡œê·¸ì¸ ì•ˆ í•˜ë©´ ì‘ì„± ë¶ˆê°€

### ë°ì´í„°ë² ì´ìŠ¤
- [x] board í…Œì´ë¸” writer í•„ë“œ (FK)
- [x] ON DELETE CASCADE
- [x] members í…Œì´ë¸” role í•„ë“œ

---

## ğŸ”— ì°¸ê³  ë¬¸ì„œ

| ë¬¸ì„œ | ë‚´ìš© |
|------|------|
| `íšŒì›_ì—°ë™_í†µí•©_ê°€ì´ë“œ.md` | ë¹„ë°€ë²ˆí˜¸ ê¸°ë°˜ â†’ ì„¸ì…˜ ê¸°ë°˜ ì „í™˜ ê°œë… |
| `SQL_ì„¤ì •_ê°€ì´ë“œ.md` | ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì¹˜ ë° ì„¤ì • |
| `íŒ€ì›ë³„_ë¸Œëœì¹˜_ì‘ì—…_ê°€ì´ë“œ.md` | Git í˜‘ì—… ë° ë¸Œëœì¹˜ ì „ëµ |

---

## ğŸ“ ì£¼ìš” ë³€ê²½ ì´ë ¥

**V3 (í˜„ì¬)**
- ì‹¤ì œ ì™„ì„±ëœ í”„ë¡œì íŠ¸ êµ¬ì¡° ë°˜ì˜
- ìƒí’ˆ ê´€ë¦¬ ì œì™¸
- test í´ë” ì‚­ì œ
- ì„¸ì…˜ ê¸°ë°˜ ì™„ì„±

**V2**
- ì´ë¡ ì  í†µí•© ê°€ì´ë“œ
- ìƒí’ˆ ê´€ë¦¬ í¬í•¨
- test í´ë” ì„¤ëª…

**V1**
- ì´ˆê¸° ê³„íš
